import { Contract, ContractFactory } from 'ethers';
import { BrowserProvider, JsonRpcSigner } from 'ethers';
// import VotingArtifact from '../artifacts/contracts/Voting.sol/Voting.json';


export const VOTING_CONTRACT_ABI =[{"type":"constructor","inputs":[{"name":"_name","type":"string","internalType":"string"},{"name":"_description","type":"string","internalType":"string"},{"name":"_startTime","type":"uint256","internalType":"uint256"},{"name":"_endTime","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"function","name":"approveCandidate","inputs":[{"name":"candidateAddress","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"approveVoter","inputs":[{"name":"voterAddress","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"candidateCount","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"candidateRequests","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"candidates","inputs":[{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"id","type":"uint256","internalType":"uint256"},{"name":"name","type":"string","internalType":"string"},{"name":"party","type":"string","internalType":"string"},{"name":"wallet","type":"address","internalType":"address"},{"name":"voteCount","type":"uint256","internalType":"uint256"},{"name":"approved","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"election","inputs":[],"outputs":[{"name":"name","type":"string","internalType":"string"},{"name":"description","type":"string","internalType":"string"},{"name":"startTime","type":"uint256","internalType":"uint256"},{"name":"endTime","type":"uint256","internalType":"uint256"},{"name":"active","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"endElection","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"getCandidateStatus","inputs":[{"name":"candidateAddress","type":"address","internalType":"address"}],"outputs":[{"name":"registered","type":"bool","internalType":"bool"},{"name":"approved","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"getCandidates","inputs":[],"outputs":[{"name":"","type":"tuple[]","internalType":"struct Voting.Candidate[]","components":[{"name":"id","type":"uint256","internalType":"uint256"},{"name":"name","type":"string","internalType":"string"},{"name":"party","type":"string","internalType":"string"},{"name":"wallet","type":"address","internalType":"address"},{"name":"voteCount","type":"uint256","internalType":"uint256"},{"name":"approved","type":"bool","internalType":"bool"}]}],"stateMutability":"view"},{"type":"function","name":"getElectionInfo","inputs":[],"outputs":[{"name":"","type":"tuple","internalType":"struct Voting.Election","components":[{"name":"name","type":"string","internalType":"string"},{"name":"description","type":"string","internalType":"string"},{"name":"startTime","type":"uint256","internalType":"uint256"},{"name":"endTime","type":"uint256","internalType":"uint256"},{"name":"active","type":"bool","internalType":"bool"}]}],"stateMutability":"view"},{"type":"function","name":"getPendingCandidates","inputs":[],"outputs":[{"name":"","type":"tuple[]","internalType":"struct Voting.Candidate[]","components":[{"name":"id","type":"uint256","internalType":"uint256"},{"name":"name","type":"string","internalType":"string"},{"name":"party","type":"string","internalType":"string"},{"name":"wallet","type":"address","internalType":"address"},{"name":"voteCount","type":"uint256","internalType":"uint256"},{"name":"approved","type":"bool","internalType":"bool"}]}],"stateMutability":"view"},{"type":"function","name":"getPendingVoterAddresses","inputs":[],"outputs":[{"name":"","type":"address[]","internalType":"address[]"}],"stateMutability":"view"},{"type":"function","name":"getPendingVoters","inputs":[],"outputs":[{"name":"","type":"tuple[]","internalType":"struct Voting.Voter[]","components":[{"name":"id","type":"uint256","internalType":"uint256"},{"name":"name","type":"string","internalType":"string"},{"name":"wallet","type":"address","internalType":"address"},{"name":"hasVoted","type":"bool","internalType":"bool"},{"name":"approved","type":"bool","internalType":"bool"}]}],"stateMutability":"view"},{"type":"function","name":"getResults","inputs":[],"outputs":[{"name":"winnerName","type":"string","internalType":"string"},{"name":"maxVotes","type":"uint256","internalType":"uint256"},{"name":"allCandidates","type":"tuple[]","internalType":"struct Voting.Candidate[]","components":[{"name":"id","type":"uint256","internalType":"uint256"},{"name":"name","type":"string","internalType":"string"},{"name":"party","type":"string","internalType":"string"},{"name":"wallet","type":"address","internalType":"address"},{"name":"voteCount","type":"uint256","internalType":"uint256"},{"name":"approved","type":"bool","internalType":"bool"}]}],"stateMutability":"view"},{"type":"function","name":"getVoterStatus","inputs":[{"name":"voterAddress","type":"address","internalType":"address"}],"outputs":[{"name":"registered","type":"bool","internalType":"bool"},{"name":"approved","type":"bool","internalType":"bool"},{"name":"hasVoted","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"getVoters","inputs":[],"outputs":[{"name":"","type":"tuple[]","internalType":"struct Voting.Voter[]","components":[{"name":"id","type":"uint256","internalType":"uint256"},{"name":"name","type":"string","internalType":"string"},{"name":"wallet","type":"address","internalType":"address"},{"name":"hasVoted","type":"bool","internalType":"bool"},{"name":"approved","type":"bool","internalType":"bool"}]}],"stateMutability":"view"},{"type":"function","name":"isRegisteredCandidate","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"isRegisteredVoter","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"pendingCandidateAddresses","inputs":[{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"pendingVoterAddresses","inputs":[{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"requestCandidateRegistration","inputs":[{"name":"name","type":"string","internalType":"string"},{"name":"party","type":"string","internalType":"string"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"requestVoterRegistration","inputs":[{"name":"name","type":"string","internalType":"string"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"totalVotes","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"vote","inputs":[{"name":"candidateId","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"voterCount","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"voterRequests","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"voters","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"id","type":"uint256","internalType":"uint256"},{"name":"name","type":"string","internalType":"string"},{"name":"wallet","type":"address","internalType":"address"},{"name":"hasVoted","type":"bool","internalType":"bool"},{"name":"approved","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"event","name":"CandidateApproved","inputs":[{"name":"id","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"name","type":"string","indexed":false,"internalType":"string"},{"name":"party","type":"string","indexed":false,"internalType":"string"},{"name":"wallet","type":"address","indexed":false,"internalType":"address"}],"anonymous":false},{"type":"event","name":"CandidateRequested","inputs":[{"name":"user","type":"address","indexed":true,"internalType":"address"},{"name":"name","type":"string","indexed":false,"internalType":"string"},{"name":"party","type":"string","indexed":false,"internalType":"string"}],"anonymous":false},{"type":"event","name":"ElectionEnded","inputs":[{"name":"winnerName","type":"string","indexed":false,"internalType":"string"},{"name":"winnerVotes","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"Voted","inputs":[{"name":"voter","type":"address","indexed":true,"internalType":"address"},{"name":"candidateId","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"VoterApproved","inputs":[{"name":"id","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"name","type":"string","indexed":false,"internalType":"string"},{"name":"wallet","type":"address","indexed":false,"internalType":"address"}],"anonymous":false},{"type":"event","name":"VoterRequested","inputs":[{"name":"user","type":"address","indexed":true,"internalType":"address"},{"name":"name","type":"string","indexed":false,"internalType":"string"}],"anonymous":false}];

export const VOTING_CONTRACT_BYTECODE ="0x608060405234801561000f575f5ffd5b50604051614cf2380380614cf283398181016040528101906100319190610309565b808210610073576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161006a906103ff565b60405180910390fd5b4282116100b5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100ac90610467565b60405180910390fd5b335f5f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506040518060a001604052808581526020018481526020018381526020018281526020016001151581525060015f820151815f019081610133919061068c565b506020820151816001019081610149919061068c565b5060408201518160020155606082015181600301556080820151816004015f6101000a81548160ff0219169083151502179055509050505050505061075b565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6101e8826101a2565b810181811067ffffffffffffffff82111715610207576102066101b2565b5b80604052505050565b5f610219610189565b905061022582826101df565b919050565b5f67ffffffffffffffff821115610244576102436101b2565b5b61024d826101a2565b9050602081019050919050565b8281835e5f83830152505050565b5f61027a6102758461022a565b610210565b9050828152602081018484840111156102965761029561019e565b5b6102a184828561025a565b509392505050565b5f82601f8301126102bd576102bc61019a565b5b81516102cd848260208601610268565b91505092915050565b5f819050919050565b6102e8816102d6565b81146102f2575f5ffd5b50565b5f81519050610303816102df565b92915050565b5f5f5f5f6080858703121561032157610320610192565b5b5f85015167ffffffffffffffff81111561033e5761033d610196565b5b61034a878288016102a9565b945050602085015167ffffffffffffffff81111561036b5761036a610196565b5b610377878288016102a9565b9350506040610388878288016102f5565b9250506060610399878288016102f5565b91505092959194509250565b5f82825260208201905092915050565b7f496e76616c69642074696d652072616e676500000000000000000000000000005f82015250565b5f6103e96012836103a5565b91506103f4826103b5565b602082019050919050565b5f6020820190508181035f830152610416816103dd565b9050919050565b7f53746172742074696d65206d75737420626520696e20667574757265000000005f82015250565b5f610451601c836103a5565b915061045c8261041d565b602082019050919050565b5f6020820190508181035f83015261047e81610445565b9050919050565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f60028204905060018216806104d357607f821691505b6020821081036104e6576104e561048f565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026105487fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8261050d565b610552868361050d565b95508019841693508086168417925050509392505050565b5f819050919050565b5f61058d610588610583846102d6565b61056a565b6102d6565b9050919050565b5f819050919050565b6105a683610573565b6105ba6105b282610594565b848454610519565b825550505050565b5f5f905090565b6105d16105c2565b6105dc81848461059d565b505050565b5b818110156105ff576105f45f826105c9565b6001810190506105e2565b5050565b601f82111561064457610615816104ec565b61061e846104fe565b8101602085101561062d578190505b610641610639856104fe565b8301826105e1565b50505b505050565b5f82821c905092915050565b5f6106645f1984600802610649565b1980831691505092915050565b5f61067c8383610655565b9150826002028217905092915050565b61069582610485565b67ffffffffffffffff8111156106ae576106ad6101b2565b5b6106b882546104bc565b6106c3828285610603565b5f60209050601f8311600181146106f4575f84156106e2578287015190505b6106ec8582610671565b865550610753565b601f198416610702866104ec565b5f5b8281101561072957848901518255600182019150602085019450602081019050610704565b868310156107465784890151610742601f891682610655565b8355505b6001600288020188555050505b505050505050565b61458a806107685f395ff3fe608060405234801561000f575f5ffd5b50600436106101c2575f3560e01c80638da5cb5b116100f7578063cdd7225311610095578063da36cffe1161006f578063da36cffe1461050a578063ece5f3001461053a578063ee2128f21461056a578063f2f7c93414610586576101c2565b8063cdd722531461048b578063d08597b9146104a9578063d6f1694f146104d9576101c2565b8063a9a981a3116100d1578063a9a981a314610401578063c3322d091461041f578063c40584b11461043d578063c4f337fc1461046d576101c2565b80638da5cb5b146103915780639a70b327146103af578063a3ec138d146103cd576101c2565b806342169e481161016457806359f784681161013e57806359f78468146103075780635ef16fa91461031157806378e3ef201461034157806386852dca14610373576101c2565b806342169e48146102a75780634717f97c146102c55780634b1d3ede146102e5576101c2565b806307be7e91116101a057806307be7e911461021c5780630d15fd7714610238578063119d4ddb146102565780633477ee2e14610272576101c2565b80630121b93f146101c657806302c7538a146101e257806306a49fce146101fe575b5f5ffd5b6101e060048036038101906101db9190613097565b6105b6565b005b6101fc60048036038101906101f791906131fe565b6109a0565b005b610206610d66565b6040516102139190613455565b60405180910390f35b6102366004803603810190610231919061349f565b61105a565b005b6102406112b4565b60405161024d91906134d9565b60405180910390f35b610270600480360381019061026b919061349f565b6112ba565b005b61028c60048036038101906102879190613097565b6115bf565b60405161029e96959493929190613558565b60405180910390f35b6102af61172e565b6040516102bc91906134d9565b60405180910390f35b6102cd611734565b6040516102dc939291906135c5565b60405180910390f35b6102ed611851565b6040516102fe959493929190613608565b60405180910390f35b61030f61198c565b005b61032b6004803603810190610326919061349f565b611a82565b6040516103389190613667565b60405180910390f35b61035b6004803603810190610356919061349f565b611a9f565b60405161036a93929190613680565b60405180910390f35b61037b611b8b565b604051610388919061372f565b60405180910390f35b610399611cf2565b6040516103a6919061374f565b60405180910390f35b6103b7611d16565b6040516103c49190613455565b60405180910390f35b6103e760048036038101906103e2919061349f565b612194565b6040516103f8959493929190613768565b60405180910390f35b610409612285565b60405161041691906134d9565b60405180910390f35b61042761228b565b60405161043491906138ee565b60405180910390f35b6104576004803603810190610452919061349f565b61268d565b60405161046491906134d9565b60405180910390f35b6104756126a2565b60405161048291906139b6565b60405180910390f35b61049361272d565b6040516104a091906138ee565b60405180910390f35b6104c360048036038101906104be919061349f565b612aa3565b6040516104d091906134d9565b60405180910390f35b6104f360048036038101906104ee919061349f565b612ab8565b6040516105019291906139d6565b60405180910390f35b610524600480360381019061051f919061349f565b612b61565b6040516105319190613667565b60405180910390f35b610554600480360381019061054f9190613097565b612b7e565b604051610561919061374f565b60405180910390f35b610584600480360381019061057f91906139fd565b612bb9565b005b6105a0600480360381019061059b9190613097565b612f5b565b6040516105ad919061374f565b60405180910390f35b60016002015442101580156105d057506001600301544211155b61060f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161060690613abd565b60405180910390fd5b60016004015f9054906101000a900460ff16610660576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161065790613b25565b60405180910390fd5b600b5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff166106e9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106e090613b8d565b60405180910390fd5b600a5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060020160159054906101000a900460ff16610776576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161076d90613bf5565b60405180910390fd5b600a5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060020160149054906101000a900460ff1615610804576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107fb90613c5d565b60405180910390fd5b5f8111801561081557506006548111155b610854576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161084b90613cc5565b60405180910390fd5b60095f8281526020019081526020015f206005015f9054906101000a900460ff166108b4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108ab90613d2d565b60405180910390fd5b6001600a5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060020160146101000a81548160ff021916908315150217905550600160095f8381526020019081526020015f206004015f8282546109319190613d78565b9250508190555060085f81548092919061094a90613dab565b91905055503373ffffffffffffffffffffffffffffffffffffffff167f4d99b957a2bc29a30ebd96a7be8e68fe50a3c701db28a91436490b7d53870ca48260405161099591906134d9565b60405180910390a250565b600b5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff1615610a2a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a2190613e3c565b60405180910390fd5b600c5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff1615610ab4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610aab90613ea4565b60405180910390fd5b5f600e5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205414610b33576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b2a90613f0c565b60405180910390fd5b60075f815480929190610b4590613dab565b9190505550600754600e5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055506040518060a0016040528060075481526020018281526020013373ffffffffffffffffffffffffffffffffffffffff1681526020015f151581526020015f1515815250600a5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f820151815f01556020820151816001019081610c2b9190614127565b506040820151816002015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060608201518160020160146101000a81548160ff02191690831515021790555060808201518160020160156101000a81548160ff021916908315150217905550905050601033908060018154018082558091505060019003905f5260205f20015f9091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055503373ffffffffffffffffffffffffffffffffffffffff167f9ce429b3729c51a5c1c92849e7088bf7955d17c5510bf84ac6ed5513a289d11382604051610d5b91906141f6565b60405180910390a250565b60605f5f90505f600190505b6006548111610dc35760095f8281526020019081526020015f206005015f9054906101000a900460ff1615610db0578180610dac90613dab565b9250505b8080610dbb90613dab565b915050610d72565b505f8167ffffffffffffffff811115610ddf57610dde6130da565b5b604051908082528060200260200182016040528015610e1857816020015b610e05612f96565b815260200190600190039081610dfd5790505b5090505f5f90505f600190505b60065481116110505760095f8281526020019081526020015f206005015f9054906101000a900460ff161561103d5760095f8281526020019081526020015f206040518060c00160405290815f8201548152602001600182018054610e8990613f57565b80601f0160208091040260200160405190810160405280929190818152602001828054610eb590613f57565b8015610f005780601f10610ed757610100808354040283529160200191610f00565b820191905f5260205f20905b815481529060010190602001808311610ee357829003601f168201915b50505050508152602001600282018054610f1990613f57565b80601f0160208091040260200160405190810160405280929190818152602001828054610f4590613f57565b8015610f905780601f10610f6757610100808354040283529160200191610f90565b820191905f5260205f20905b815481529060010190602001808311610f7357829003601f168201915b50505050508152602001600382015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160048201548152602001600582015f9054906101000a900460ff16151515158152505083838061101e90613dab565b94508151811061103157611030614216565b5b60200260200101819052505b808061104890613dab565b915050610e25565b5081935050505090565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146110e8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110df9061428d565b60405180910390fd5b5f600d5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490505f811161116b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611162906142f5565b60405180910390fd5b60095f8281526020019081526020015f206005015f9054906101000a900460ff16156111cc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111c39061435d565b60405180910390fd5b600160095f8381526020019081526020015f206005015f6101000a81548160ff0219169083151502179055506001600c5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f6101000a81548160ff0219169083151502179055507f2ca28526ca2825de0ff39bb564fe7a42fe236f8a86df7bfa0d1c9114e90091eb8160095f8481526020019081526020015f2060010160095f8581526020019081526020015f20600201856040516112a894939291906143fc565b60405180910390a15050565b60085481565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611348576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161133f9061428d565b60405180910390fd5b5f600e5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054116113c7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113be906142f5565b60405180910390fd5b600a5f8273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060020160159054906101000a900460ff1615611455576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161144c9061435d565b60405180910390fd5b6001600a5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060020160156101000a81548160ff0219169083151502179055506001600b5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f6101000a81548160ff0219169083151502179055507f18263abf741210021f1b52ef33c4e8b0981f0a6919c7ee358805a3a53d2e2d9b600a5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f0154600a5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20600101836040516115b49392919061444d565b60405180910390a150565b6009602052805f5260405f205f91509050805f0154908060010180546115e490613f57565b80601f016020809104026020016040519081016040528092919081815260200182805461161090613f57565b801561165b5780601f106116325761010080835404028352916020019161165b565b820191905f5260205f20905b81548152906001019060200180831161163e57829003601f168201915b50505050509080600201805461167090613f57565b80601f016020809104026020016040519081016040528092919081815260200182805461169c90613f57565b80156116e75780601f106116be576101008083540402835291602001916116e7565b820191905f5260205f20905b8154815290600101906020018083116116ca57829003601f168201915b505050505090806003015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806004015490806005015f9054906101000a900460ff16905086565b60075481565b60605f606060016003015442118061175b575060016004015f9054906101000a900460ff16155b61179a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611791906144d3565b60405180910390fd5b5f6117a3610d66565b90505f60405180602001604052805f81525090505f5f90505f5f90505b835181101561183f57818482815181106117dd576117dc614216565b5b60200260200101516080015111156118325783818151811061180257611801614216565b5b602002602001015160800151915083818151811061182357611822614216565b5b60200260200101516020015192505b80806001019150506117c0565b50818184955095509550505050909192565b6001805f01805461186190613f57565b80601f016020809104026020016040519081016040528092919081815260200182805461188d90613f57565b80156118d85780601f106118af576101008083540402835291602001916118d8565b820191905f5260205f20905b8154815290600101906020018083116118bb57829003601f168201915b5050505050908060010180546118ed90613f57565b80601f016020809104026020016040519081016040528092919081815260200182805461191990613f57565b80156119645780601f1061193b57610100808354040283529160200191611964565b820191905f5260205f20905b81548152906001019060200180831161194757829003601f168201915b505050505090806002015490806003015490806004015f9054906101000a900460ff16905085565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611a1a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a119061428d565b60405180910390fd5b5f60016004015f6101000a81548160ff0219169083151502179055505f5f611a40611734565b50915091507f4d31db6748edbbd9e5b81d507a6477be9bddc93567dc5e6fac4e6bae81f27fa58282604051611a769291906144f1565b60405180910390a15050565b600c602052805f5260405f205f915054906101000a900460ff1681565b5f5f5f5f600e5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205411600a5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060020160159054906101000a900460ff16600a5f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060020160149054906101000a900460ff169250925092509193909250565b611b93612fe0565b60016040518060a00160405290815f82018054611baf90613f57565b80601f0160208091040260200160405190810160405280929190818152602001828054611bdb90613f57565b8015611c265780601f10611bfd57610100808354040283529160200191611c26565b820191905f5260205f20905b815481529060010190602001808311611c0957829003601f168201915b50505050508152602001600182018054611c3f90613f57565b80601f0160208091040260200160405190810160405280929190818152602001828054611c6b90613f57565b8015611cb65780601f10611c8d57610100808354040283529160200191611cb6565b820191905f5260205f20905b815481529060010190602001808311611c9957829003601f168201915b505050505081526020016002820154815260200160038201548152602001600482015f9054906101000a900460ff161515151581525050905090565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60605f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614611da6576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611d9d9061428d565b60405180910390fd5b5f5f90505f5f90505b600f80549050811015611e7f575f600f8281548110611dd157611dd0614216565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505f600d5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905060095f8281526020019081526020015f206005015f9054906101000a900460ff16611e70578380611e6c90613dab565b9450505b50508080600101915050611daf565b505f8167ffffffffffffffff811115611e9b57611e9a6130da565b5b604051908082528060200260200182016040528015611ed457816020015b611ec1612f96565b815260200190600190039081611eb95790505b5090505f5f90505f5f90505b600f8054905081101561218a575f600f8281548110611f0257611f01614216565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505f600d5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905060095f8281526020019081526020015f206005015f9054906101000a900460ff1661217b5760095f8281526020019081526020015f206040518060c00160405290815f8201548152602001600182018054611fc790613f57565b80601f0160208091040260200160405190810160405280929190818152602001828054611ff390613f57565b801561203e5780601f106120155761010080835404028352916020019161203e565b820191905f5260205f20905b81548152906001019060200180831161202157829003601f168201915b5050505050815260200160028201805461205790613f57565b80601f016020809104026020016040519081016040528092919081815260200182805461208390613f57565b80156120ce5780601f106120a5576101008083540402835291602001916120ce565b820191905f5260205f20905b8154815290600101906020018083116120b157829003601f168201915b50505050508152602001600382015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160048201548152602001600582015f9054906101000a900460ff16151515158152505085858061215c90613dab565b96508151811061216f5761216e614216565b5b60200260200101819052505b50508080600101915050611ee0565b5081935050505090565b600a602052805f5260405f205f91509050805f0154908060010180546121b990613f57565b80601f01602080910402602001604051908101604052809291908181526020018280546121e590613f57565b80156122305780601f1061220757610100808354040283529160200191612230565b820191905f5260205f20905b81548152906001019060200180831161221357829003601f168201915b505050505090806002015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060020160149054906101000a900460ff16908060020160159054906101000a900460ff16905085565b60065481565b60605f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461231b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016123129061428d565b60405180910390fd5b5f5f90505f5f90505b6010805490508110156123df575f6010828154811061234657612345614216565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600a5f8273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060020160159054906101000a900460ff166123d15782806123cd90613dab565b9350505b508080600101915050612324565b505f8167ffffffffffffffff8111156123fb576123fa6130da565b5b60405190808252806020026020018201604052801561243457816020015b61242161300e565b8152602001906001900390816124195790505b5090505f5f90505f5f90505b601080549050811015612683575f6010828154811061246257612461614216565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600a5f8273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060020160159054906101000a900460ff1661267557600a5f8273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f206040518060a00160405290815f820154815260200160018201805461253f90613f57565b80601f016020809104026020016040519081016040528092919081815260200182805461256b90613f57565b80156125b65780601f1061258d576101008083540402835291602001916125b6565b820191905f5260205f20905b81548152906001019060200180831161259957829003601f168201915b50505050508152602001600282015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016002820160149054906101000a900460ff161515151581526020016002820160159054906101000a900460ff16151515158152505084848061265690613dab565b95508151811061266957612668614216565b5b60200260200101819052505b508080600101915050612440565b5081935050505090565b600e602052805f5260405f205f915090505481565b6060601080548060200260200160405190810160405280929190818152602001828054801561272357602002820191905f5260205f20905b815f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116126da575b5050505050905090565b60605f5f90505f5f90505b6010805490508110156127f4575f6010828154811061275a57612759614216565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600a5f8273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060020160159054906101000a900460ff16156127e65782806127e290613dab565b9350505b508080600101915050612738565b505f8167ffffffffffffffff8111156128105761280f6130da565b5b60405190808252806020026020018201604052801561284957816020015b61283661300e565b81526020019060019003908161282e5790505b5090505f5f90505f5f90505b601080549050811015612a99575f6010828154811061287757612876614216565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600a5f8273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2060020160159054906101000a900460ff1615612a8b57600a5f8273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f206040518060a00160405290815f820154815260200160018201805461295590613f57565b80601f016020809104026020016040519081016040528092919081815260200182805461298190613f57565b80156129cc5780601f106129a3576101008083540402835291602001916129cc565b820191905f5260205f20905b8154815290600101906020018083116129af57829003601f168201915b50505050508152602001600282015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016002820160149054906101000a900460ff161515151581526020016002820160159054906101000a900460ff161515151581525050848480612a6c90613dab565b955081518110612a7f57612a7e614216565b5b60200260200101819052505b508080600101915050612855565b5081935050505090565b600d602052805f5260405f205f915090505481565b5f5f5f600d5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20541160095f600d5f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205481526020019081526020015f206005015f9054906101000a900460ff1691509150915091565b600b602052805f5260405f205f915054906101000a900460ff1681565b600f8181548110612b8d575f80fd5b905f5260205f20015f915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600c5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff1615612c43576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612c3a90613ea4565b60405180910390fd5b600b5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff1615612ccd576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612cc490613e3c565b60405180910390fd5b5f600d5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205414612d4c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612d4390613f0c565b60405180910390fd5b60065f815480929190612d5e90613dab565b9190505550600654600d5f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055506040518060c0016040528060065481526020018381526020018281526020013373ffffffffffffffffffffffffffffffffffffffff1681526020015f81526020015f151581525060095f60065481526020019081526020015f205f820151815f01556020820151816001019081612e1e9190614127565b506040820151816002019081612e349190614127565b506060820151816003015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015f6101000a81548160ff021916908315150217905550905050600f33908060018154018082558091505060019003905f5260205f20015f9091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055503373ffffffffffffffffffffffffffffffffffffffff167f2c1806f9c994a02f7cb39705d06fd4dc4a7d8639fe220638bbc8bb4a60fb6b8d8383604051612f4f92919061451f565b60405180910390a25050565b60108181548110612f6a575f80fd5b905f5260205f20015f915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6040518060c001604052805f815260200160608152602001606081526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f81526020015f151581525090565b6040518060a0016040528060608152602001606081526020015f81526020015f81526020015f151581525090565b6040518060a001604052805f8152602001606081526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f151581526020015f151581525090565b5f604051905090565b5f5ffd5b5f5ffd5b5f819050919050565b61307681613064565b8114613080575f5ffd5b50565b5f813590506130918161306d565b92915050565b5f602082840312156130ac576130ab61305c565b5b5f6130b984828501613083565b91505092915050565b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b613110826130ca565b810181811067ffffffffffffffff8211171561312f5761312e6130da565b5b80604052505050565b5f613141613053565b905061314d8282613107565b919050565b5f67ffffffffffffffff82111561316c5761316b6130da565b5b613175826130ca565b9050602081019050919050565b828183375f83830152505050565b5f6131a261319d84613152565b613138565b9050828152602081018484840111156131be576131bd6130c6565b5b6131c9848285613182565b509392505050565b5f82601f8301126131e5576131e46130c2565b5b81356131f5848260208601613190565b91505092915050565b5f602082840312156132135761321261305c565b5b5f82013567ffffffffffffffff8111156132305761322f613060565b5b61323c848285016131d1565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b61327781613064565b82525050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f6132af8261327d565b6132b98185613287565b93506132c9818560208601613297565b6132d2816130ca565b840191505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f613306826132dd565b9050919050565b613316816132fc565b82525050565b5f8115159050919050565b6133308161331c565b82525050565b5f60c083015f83015161334b5f86018261326e565b506020830151848203602086015261336382826132a5565b9150506040830151848203604086015261337d82826132a5565b9150506060830151613392606086018261330d565b5060808301516133a5608086018261326e565b5060a08301516133b860a0860182613327565b508091505092915050565b5f6133ce8383613336565b905092915050565b5f602082019050919050565b5f6133ec82613245565b6133f6818561324f565b9350836020820285016134088561325f565b805f5b85811015613443578484038952815161342485826133c3565b945061342f836133d6565b925060208a0199505060018101905061340b565b50829750879550505050505092915050565b5f6020820190508181035f83015261346d81846133e2565b905092915050565b61347e816132fc565b8114613488575f5ffd5b50565b5f8135905061349981613475565b92915050565b5f602082840312156134b4576134b361305c565b5b5f6134c18482850161348b565b91505092915050565b6134d381613064565b82525050565b5f6020820190506134ec5f8301846134ca565b92915050565b5f82825260208201905092915050565b5f61350c8261327d565b61351681856134f2565b9350613526818560208601613297565b61352f816130ca565b840191505092915050565b613543816132fc565b82525050565b6135528161331c565b82525050565b5f60c08201905061356b5f8301896134ca565b818103602083015261357d8188613502565b905081810360408301526135918187613502565b90506135a0606083018661353a565b6135ad60808301856134ca565b6135ba60a0830184613549565b979650505050505050565b5f6060820190508181035f8301526135dd8186613502565b90506135ec60208301856134ca565b81810360408301526135fe81846133e2565b9050949350505050565b5f60a0820190508181035f8301526136208188613502565b905081810360208301526136348187613502565b905061364360408301866134ca565b61365060608301856134ca565b61365d6080830184613549565b9695505050505050565b5f60208201905061367a5f830184613549565b92915050565b5f6060820190506136935f830186613549565b6136a06020830185613549565b6136ad6040830184613549565b949350505050565b5f60a083015f8301518482035f8601526136cf82826132a5565b915050602083015184820360208601526136e982826132a5565b91505060408301516136fe604086018261326e565b506060830151613711606086018261326e565b5060808301516137246080860182613327565b508091505092915050565b5f6020820190508181035f83015261374781846136b5565b905092915050565b5f6020820190506137625f83018461353a565b92915050565b5f60a08201905061377b5f8301886134ca565b818103602083015261378d8187613502565b905061379c604083018661353a565b6137a96060830185613549565b6137b66080830184613549565b9695505050505050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b5f60a083015f8301516137fe5f86018261326e565b506020830151848203602086015261381682826132a5565b915050604083015161382b604086018261330d565b50606083015161383e6060860182613327565b5060808301516138516080860182613327565b508091505092915050565b5f61386783836137e9565b905092915050565b5f602082019050919050565b5f613885826137c0565b61388f81856137ca565b9350836020820285016138a1856137da565b805f5b858110156138dc57848403895281516138bd858261385c565b94506138c88361386f565b925060208a019950506001810190506138a4565b50829750879550505050505092915050565b5f6020820190508181035f830152613906818461387b565b905092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b5f613942838361330d565b60208301905092915050565b5f602082019050919050565b5f6139648261390e565b61396e8185613918565b935061397983613928565b805f5b838110156139a95781516139908882613937565b975061399b8361394e565b92505060018101905061397c565b5085935050505092915050565b5f6020820190508181035f8301526139ce818461395a565b905092915050565b5f6040820190506139e95f830185613549565b6139f66020830184613549565b9392505050565b5f5f60408385031215613a1357613a1261305c565b5b5f83013567ffffffffffffffff811115613a3057613a2f613060565b5b613a3c858286016131d1565b925050602083013567ffffffffffffffff811115613a5d57613a5c613060565b5b613a69858286016131d1565b9150509250929050565b7f566f74696e67206e6f74206163746976650000000000000000000000000000005f82015250565b5f613aa76011836134f2565b9150613ab282613a73565b602082019050919050565b5f6020820190508181035f830152613ad481613a9b565b9050919050565b7f456c656374696f6e206e6f7420616374697665000000000000000000000000005f82015250565b5f613b0f6013836134f2565b9150613b1a82613adb565b602082019050919050565b5f6020820190508181035f830152613b3c81613b03565b9050919050565b7f4e6f742061207265676973746572656420766f746572000000000000000000005f82015250565b5f613b776016836134f2565b9150613b8282613b43565b602082019050919050565b5f6020820190508181035f830152613ba481613b6b565b9050919050565b7f566f746572206e6f7420617070726f76656400000000000000000000000000005f82015250565b5f613bdf6012836134f2565b9150613bea82613bab565b602082019050919050565b5f6020820190508181035f830152613c0c81613bd3565b9050919050565b7f416c726561647920766f746564000000000000000000000000000000000000005f82015250565b5f613c47600d836134f2565b9150613c5282613c13565b602082019050919050565b5f6020820190508181035f830152613c7481613c3b565b9050919050565b7f496e76616c69642063616e6469646174650000000000000000000000000000005f82015250565b5f613caf6011836134f2565b9150613cba82613c7b565b602082019050919050565b5f6020820190508181035f830152613cdc81613ca3565b9050919050565b7f43616e646964617465206e6f7420617070726f766564000000000000000000005f82015250565b5f613d176016836134f2565b9150613d2282613ce3565b602082019050919050565b5f6020820190508181035f830152613d4481613d0b565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f613d8282613064565b9150613d8d83613064565b9250828201905080821115613da557613da4613d4b565b5b92915050565b5f613db582613064565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203613de757613de6613d4b565b5b600182019050919050565b7f416c7265616479207265676973746572656420617320766f74657200000000005f82015250565b5f613e26601b836134f2565b9150613e3182613df2565b602082019050919050565b5f6020820190508181035f830152613e5381613e1a565b9050919050565b7f416c726561647920726567697374657265642061732063616e646964617465005f82015250565b5f613e8e601f836134f2565b9150613e9982613e5a565b602082019050919050565b5f6020820190508181035f830152613ebb81613e82565b9050919050565b7f5265717565737420616c72656164792070656e64696e670000000000000000005f82015250565b5f613ef66017836134f2565b9150613f0182613ec2565b602082019050919050565b5f6020820190508181035f830152613f2381613eea565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680613f6e57607f821691505b602082108103613f8157613f80613f2a565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f60088302613fe37fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82613fa8565b613fed8683613fa8565b95508019841693508086168417925050509392505050565b5f819050919050565b5f61402861402361401e84613064565b614005565b613064565b9050919050565b5f819050919050565b6140418361400e565b61405561404d8261402f565b848454613fb4565b825550505050565b5f5f905090565b61406c61405d565b614077818484614038565b505050565b5b8181101561409a5761408f5f82614064565b60018101905061407d565b5050565b601f8211156140df576140b081613f87565b6140b984613f99565b810160208510156140c8578190505b6140dc6140d485613f99565b83018261407c565b50505b505050565b5f82821c905092915050565b5f6140ff5f19846008026140e4565b1980831691505092915050565b5f61411783836140f0565b9150826002028217905092915050565b6141308261327d565b67ffffffffffffffff811115614149576141486130da565b5b6141538254613f57565b61415e82828561409e565b5f60209050601f83116001811461418f575f841561417d578287015190505b614187858261410c565b8655506141ee565b601f19841661419d86613f87565b5f5b828110156141c45784890151825560018201915060208501945060208101905061419f565b868310156141e157848901516141dd601f8916826140f0565b8355505b6001600288020188555050505b505050505050565b5f6020820190508181035f83015261420e8184613502565b905092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e6f7420617574686f72697a65640000000000000000000000000000000000005f82015250565b5f614277600e836134f2565b915061428282614243565b602082019050919050565b5f6020820190508181035f8301526142a48161426b565b9050919050565b7f4e6f2070656e64696e67207265717565737400000000000000000000000000005f82015250565b5f6142df6012836134f2565b91506142ea826142ab565b602082019050919050565b5f6020820190508181035f83015261430c816142d3565b9050919050565b7f416c726561647920617070726f766564000000000000000000000000000000005f82015250565b5f6143476010836134f2565b915061435282614313565b602082019050919050565b5f6020820190508181035f8301526143748161433b565b9050919050565b5f815461438781613f57565b61439181866134f2565b9450600182165f81146143ab57600181146143c1576143f3565b60ff1983168652811515602002860193506143f3565b6143ca85613f87565b5f5b838110156143eb578154818901526001820191506020810190506143cc565b808801955050505b50505092915050565b5f60808201905061440f5f8301876134ca565b8181036020830152614421818661437b565b90508181036040830152614435818561437b565b9050614444606083018461353a565b95945050505050565b5f6060820190506144605f8301866134ca565b8181036020830152614472818561437b565b9050614481604083018461353a565b949350505050565b7f566f74696e67207374696c6c20616374697665000000000000000000000000005f82015250565b5f6144bd6013836134f2565b91506144c882614489565b602082019050919050565b5f6020820190508181035f8301526144ea816144b1565b9050919050565b5f6040820190508181035f8301526145098185613502565b905061451860208301846134ca565b9392505050565b5f6040820190508181035f8301526145378185613502565b9050818103602083015261454b8184613502565b9050939250505056fea26469706673582212208724b3a9c113099554b6e0b2cf874b9c78e802b5fc838e53aaa4d11f4455013064736f6c634300081e0033";


// function for deploying a contract
// it requires the election name,description and starting and ending time stamp of the election process
export async function deployVotingContract(
  signer: JsonRpcSigner,
  name: string,
  description: string,
  startTime: number,
  endTime: number
): Promise<Contract> {
  const factory = new ContractFactory(VOTING_CONTRACT_ABI, VOTING_CONTRACT_BYTECODE, signer);
  const contract = await factory.deploy(name, description, startTime, endTime);
  await contract.waitForDeployment();
  return contract;
}

// this function returns an ethers.Contract instance for the smart contract using the given address, ABI, and either a signer 
// (for sending transactions) or a provider (for reading data).
export function getVotingContract(
  contractAddress: string,
  provider: BrowserProvider,
  signer?: JsonRpcSigner
): Contract {
  return new Contract(contractAddress, VOTING_CONTRACT_ABI, signer || provider);
}


// this function retrieves the election information from the contract
// it returns an object containing the election name, description, start time, end time, and active status

export async function getElectionInfo(contract: Contract) {
  const election = await contract.getElectionInfo();
  return {
    name: election.name,
    description: election.description,
    startTime: Number(election.startTime),
    endTime: Number(election.endTime),
    active: election.active
  };
}


// this function retrieves the list of candidates from the contract
// it returns an array of candidate objects, each containing id, name, party, wallet address vote count, and approval status

export async function getCandidates(contract: Contract) {
  const candidates = await contract.getCandidates();
  return candidates.map((candidate: any) => ({
    id: Number(candidate.id),
    name: candidate.name,
    party: candidate.party,
    wallet: candidate.wallet,
    voteCount: Number(candidate.voteCount),
    approved: candidate.approved
  }));
}


// 
export async function getPendingCandidates(contract: Contract) {
  const candidates = await contract.getPendingCandidates();
  return candidates.map((candidate: any) => ({
    id: Number(candidate.id),
    name: candidate.name,
    party: candidate.party,
    wallet: candidate.wallet,
    voteCount: Number(candidate.voteCount),
    approved: candidate.approved
  }));
}

export async function getPendingVoters(contract: Contract) {
  const voters = await contract.getPendingVoters();
  return voters.map((voter: any) => ({
    id: Number(voter.id),
    name: voter.name,
    wallet: voter.wallet,
    hasVoted: voter.hasVoted,
    approved: voter.approved
  }));
}

export async function getResults(contract: Contract) {
  const results = await contract.getResults();
  return {
    winnerName: results.winnerName,
    maxVotes: Number(results.maxVotes),
    allCandidates: results.allCandidates.map((candidate: any) => ({
      id: Number(candidate.id),
      name: candidate.name,
      party: candidate.party,
      wallet: candidate.wallet,
      voteCount: Number(candidate.voteCount),
      approved: candidate.approved
    }))
  };
}

export async function getVoterStatus(contract: Contract, voterAddress: string) {
  const status = await contract.getVoterStatus(voterAddress);
  return {
    registered: status.registered,
    approved: status.approved,
    hasVoted: status.hasVoted
  };
}

export async function getCandidateStatus(contract: Contract, candidateAddress: string) {
  const status = await contract.getCandidateStatus(candidateAddress);
  return {
    registered: status.registered,
    approved: status.approved
  };
}